# Development Log - Simple Linear Regression Project

## 專案概述

本專案目標是實現一個簡單線性回歸問題，完整遵循 CRISP-DM 方法論，並提供網頁介面讓使用者可以調整參數並即時查看結果。

---

## CRISP-DM 方法論實施

### 1. Business Understanding (商業理解)

**目標定義**：
- 建立一個教學用的線性回歸模型，幫助使用者理解線性回歸的工作原理
- 展示不同參數（斜率、截距、雜訊）如何影響模型效能
- 提供互動式介面，讓使用者能夠實驗和學習

**成功標準**：
- 模型能夠準確擬合生成的線性資料
- 使用者可以調整所有關鍵參數
- 提供清晰的視覺化和評估指標

**決策理由**：
- 選擇簡單線性回歸作為起點，因為它易於理解且視覺化效果好
- 使用合成資料而非真實資料，讓使用者能夠控制所有變數並理解因果關係

---

### 2. Data Understanding (資料理解)

**資料來源**：
- 使用程式生成合成資料，遵循公式：y = ax + b + noise
- 資料特性完全可控，便於教學和實驗

**資料特徵**：
- **自變數 (X)**：在指定範圍內均勻分布的數值
- **應變數 (y)**：由線性關係加上高斯雜訊生成
- **可調參數**：
  - a (斜率)：-10.0 到 10.0
  - b (截距)：-10.0 到 10.0
  - noise (雜訊標準差)：0.0 到 5.0
  - n_points (資料點數)：50 到 500

**探索性分析決策**：
- 提供散點圖展示原始資料分布
- 顯示資料統計摘要
- 視覺化真實關係與預測關係的差異

---

### 3. Data Preparation (資料準備)

**資料生成流程**：
```python
1. 生成均勻分布的 X 值
2. 根據公式 y = a*X + b 計算理想 y 值
3. 添加高斯雜訊：noise ~ N(0, σ²)
4. 分割訓練集和測試集（80/20）
```

**資料預處理決策**：
- **不進行標準化**：因為是教學用途，保持原始尺度更直觀
- **訓練/測試分割**：使用 80/20 分割，確保有足夠資料評估泛化能力
- **隨機種子**：使用固定 random_state 確保結果可重現

**資料品質考量**：
- 合成資料保證沒有缺失值
- 雜訊程度可控，讓使用者理解噪音對模型的影響
- 資料點數量可調，展示樣本大小的重要性

---

### 4. Modeling (建模)

**模型選擇**：
- 使用 Scikit-learn 的 LinearRegression
- 採用最小平方法（Ordinary Least Squares）

**模型選擇理由**：
- 問題本質是線性的，LinearRegression 是最適合的選擇
- Scikit-learn 提供穩定可靠的實現
- 不需要調整超參數，適合初學者

**模型訓練流程**：
```python
1. 初始化 LinearRegression 模型
2. 使用訓練資料擬合模型：model.fit(X_train, y_train)
3. 提取學習到的參數（斜率和截距）
4. 在測試集上進行預測
```

**特徵工程**：
- 單一特徵（X），不需要額外的特徵工程
- 保持簡單以利於理解和解釋

---

### 5. Evaluation (評估)

**評估指標**：

1. **Mean Squared Error (MSE)**
   - 公式：MSE = (1/n) Σ(y_true - y_pred)²
   - 用途：衡量預測誤差的平均平方
   - 優點：懲罰大的誤差

2. **R² Score (決定係數)**
   - 公式：R² = 1 - (SS_res / SS_tot)
   - 範圍：-∞ 到 1.0（1.0 表示完美擬合）
   - 用途：衡量模型解釋變異的比例

3. **視覺化評估**
   - 回歸線與實際資料點的對比
   - 預測值 vs 實際值散點圖（理想情況應在 45° 線上）
   - 殘差圖（檢查是否有系統性誤差）

**評估決策**：
- 同時使用數值指標和視覺化，提供完整的模型理解
- 顯示學習到的參數與真實參數的比較
- 當雜訊增加時，MSE 應該增加而 R² 應該減少

---

### 6. Deployment (部署)

**部署策略**：

**技術選擇：Streamlit**
- **理由**：
  - 快速開發：純 Python，無需 HTML/CSS/JavaScript
  - 易於互動：內建滑桿、按鈕等 UI 元件
  - 自動更新：參數改變時自動重新執行
  - 簡單部署：可輕鬆部署到 Streamlit Cloud

**替代方案考慮（Flask）**：
- 更靈活但需要更多前端開發
- 對於此專案，Streamlit 更適合快速原型和互動式應用

**部署流程**：
1. **本地測試**：`streamlit run app.py`
2. **GitHub 準備**：
   - 建立 .gitignore 排除不必要檔案
   - 撰寫 README.md 說明專案
   - 建立 requirements.txt 列出依賴

3. **Streamlit Cloud 部署**：
   - 推送到 GitHub
   - 連接 Streamlit Cloud
   - 選擇倉庫和主檔案
   - 自動部署並獲得公開 URL

**使用者介面設計**：
- 側邊欄：參數調整區
- 主區域：結果展示（圖表和指標）
- 分頁或折疊區：CRISP-DM 步驟說明

---

## 技術決策記錄

### 1. 程式語言與套件選擇

**Python 3.8+**
- 理由：資料科學標準語言，套件生態系完善

**核心套件**：
- `numpy`：數值計算和陣列操作
- `pandas`：資料結構和分析（雖然此專案較簡單）
- `scikit-learn`：機器學習模型
- `matplotlib` & `seaborn`：視覺化
- `streamlit`：網頁應用框架

### 2. 程式架構設計

**模組化結構**：
```python
1. 資料生成函數：generate_data(a, b, noise, n_points)
2. 模型訓練函數：train_model(X_train, y_train)
3. 模型評估函數：evaluate_model(model, X_test, y_test)
4. 視覺化函數：plot_regression(), plot_predictions(), plot_residuals()
5. Streamlit UI：main()
```

**設計原則**：
- 函數式設計：每個函數負責單一功能
- 可重用性：函數可以獨立測試和使用
- 清晰命名：函數和變數名稱自解釋

### 3. 視覺化策略

**圖表選擇**：

1. **散點圖 + 回歸線**
   - 目的：展示模型如何擬合資料
   - 元素：資料點（散點）、真實線（虛線）、預測線（實線）

2. **預測 vs 實際值圖**
   - 目的：檢查預測準確度
   - 理想狀態：所有點在 45° 對角線上

3. **殘差圖**
   - 目的：檢查模型假設（誤差隨機分布）
   - 警訊：如果有明顯模式，表示模型不適合

**顏色和樣式**：
- 使用對比色區分不同元素
- 添加標籤和圖例
- 設定適當的圖表大小

---

## 開發過程步驟

### Step 1: 環境設定
```bash
# 建立虛擬環境（建議）
python -m venv venv
venv\Scripts\activate  # Windows

# 安裝套件
pip install -r requirements.txt
```

### Step 2: 核心功能開發
1. 實作資料生成邏輯
2. 實作線性回歸模型
3. 實作評估指標計算
4. 實作視覺化函數

### Step 3: Streamlit 介面開發
1. 建立參數控制滑桿
2. 整合資料生成和模型訓練
3. 添加圖表展示
4. 添加 CRISP-DM 步驟說明

### Step 4: 測試與優化
1. 測試不同參數組合
2. 檢查邊界情況（如 noise=0）
3. 優化視覺化效果
4. 確保響應速度

### Step 5: 文件撰寫
1. 撰寫 README.md
2. 撰寫此 Development.md
3. 添加程式碼註釋

### Step 6: 部署準備
1. 建立 .gitignore
2. 建立 requirements.txt
3. 測試本地執行
4. 推送到 GitHub
5. 部署到 Streamlit Cloud

---

## 遇到的挑戰與解決方案

### 挑戰 1: Streamlit 自動重新執行
**問題**：每次調整參數都會重新執行整個腳本
**解決**：
- 接受 Streamlit 的設計理念
- 確保計算效率（線性回歸很快）
- 可考慮使用 `@st.cache_data` 快取昂貴的計算（本專案不需要）

### 挑戰 2: 圖表在 Streamlit 中的顯示
**問題**：Matplotlib 圖表需要正確顯示在 Streamlit 中
**解決**：
- 使用 `st.pyplot(fig)` 顯示圖表
- 記得關閉圖表 `plt.close()` 避免記憶體洩漏

### 挑戰 3: 參數範圍設定
**問題**：需要選擇合理的參數範圍
**解決**：
- 斜率和截距：±10.0（足夠展示不同情況）
- 雜訊：0-5.0（0表示無雜訊，5.0展示高雜訊影響）
- 資料點數：50-500（平衡計算速度和視覺效果）

---

## 未來改進方向

### 短期改進
1. 添加更多回歸演算法比較（Ridge, Lasso）
2. 支援多項式回歸
3. 添加交叉驗證
4. 匯出結果功能

### 中期改進
1. 支援上傳真實資料集
2. 添加更多評估指標（MAE, RMSE）
3. 互動式圖表（使用 Plotly）
4. 支援多變數回歸

### 長期改進
1. 建立完整的教學平台
2. 添加其他機器學習演算法
3. 提供程式碼解釋和教學材料
4. 支援多國語言

---

## 學習重點

1. **CRISP-DM 的實際應用**
   - 不僅僅是寫程式，而是系統化的解決問題
   - 每個步驟都有明確的目標和產出

2. **Streamlit 的優勢**
   - 快速將資料科學專案轉換為網頁應用
   - 適合原型開發和教學展示

3. **線性回歸的直觀理解**
   - 參數調整如何影響模型
   - 雜訊如何影響模型效能
   - 樣本大小的重要性

4. **完整專案流程**
   - 從需求分析到部署的完整經驗
   - Git 版本控制
   - 文件撰寫的重要性

---

## 總結

本專案成功實現了一個完整的線性回歸教學應用，遵循 CRISP-DM 方法論的所有步驟。透過 Streamlit，我們建立了一個易於使用的互動式介面，讓使用者能夠實驗不同參數並即時查看結果。專案不僅展示了技術實現，更重要的是展示了資料科學專案的完整流程和思考方式。

**專案時間**：2025年10月7日
**技術棧**：Python, Streamlit, Scikit-learn, NumPy, Matplotlib
**部署平台**：Streamlit Cloud
